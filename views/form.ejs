<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-4">
        <h2 class="text-center">Registration Form</h2>
        <form id="registrationForm" action="/preview" method="POST" enctype="multipart/form-data" class="p-4 border rounded bg-light shadow">
            <input type="hidden" name="roll_number" value="<%= rollNumber %>">

            <div class="mb-3">
                <label class="form-label">Membership Type:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input required-field" type="radio" name="membership_type" value="Regular" required>
                    <label class="form-check-label">Regular</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input required-field" type="radio" name="membership_type" value="Associate" required>
                    <label class="form-check-label">Associate</label>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Family Name:</label>
                <input type="text" class="form-control required-field" name="family_name" required>
            </div>

            <div class="mb-3">
                <label class="form-label">First Name:</label>
                <input type="text" class="form-control required-field" name="first_name" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Middle Name (Optional):</label>
                <input type="text" class="form-control" name="middle_name">
            </div>

            <div class="mb-3">
                <label class="form-label">Gender:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input required-field" type="radio" name="gender" value="Male" required>
                    <label class="form-check-label">Male</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input required-field" type="radio" name="gender" value="Female" required>
                    <label class="form-check-label">Female</label>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Mobile Phone:</label>
                <input type="text" class="form-control required-field" name="mobile_phone" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Email Address:</label>
                <input type="email" class="form-control required-field" name="email_address" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Birthday:</label>
                <input type="date" class="form-control required-field" name="birthday" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Address:</label>
                <input type="text" class="form-control required-field" name="address" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Municipality:</label>
                <input type="text" class="form-control required-field" name="municipality" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Barangay (Optional):</label>
                <input type="text" class="form-control" name="baranggay">
            </div>

            <div class="mb-3">
                <label class="form-label">Province:</label>
                <input type="text" class="form-control required-field" name="province" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Zip Code (Optional):</label>
                <input type="text" class="form-control" name="zip">
            </div>

            <div class="mb-3">
                <label class="form-label">ID Type:</label>
                <select name="id_type" class="form-select required-field" required>
                    <option value="">Select ID Type</option>
                    <option value="Driver's License">Driver's License</option>
                    <option value="Passport">Passport</option>
                    <option value="Student ID">Student ID</option>
                    <option value="Voter's ID">Voter's ID</option>
                    <option value="SSS ID">SSS ID</option>
                    <option value="National ID">National ID</option>
                    <option value="Other ID">Other ID</option>
                </select>
            </div>

            <div class="mb-3">
                <label class="form-label">Selfie:</label>
                <input type="file" class="form-control required-field" name="selfie" accept="image/*" capture="user" required>
            </div>

            <div class="mb-3">
                <label class="form-label">ID Front:</label>
                <input type="file" class="form-control required-field" name="id_front" accept="image/*" capture="environment" required>
                
            </div>

            <div class="mb-3">
                <label class="form-label">ID Back:</label>
                <input type="file" class="form-control required-field" name="id_back" accept="image/*" capture="environment" required>
            </div>

            <div class="mb-3">
                <label class="form-label">Agree to Terms:</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input required-field" type="radio" name="agree_to_terms" value="Yes" required onchange="validateForm()">
                    <label class="form-check-label">Yes</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="agree_to_terms" value="No" required onchange="validateForm()">
                    <label class="form-check-label">No</label>
                </div>
            </div>

            <div class="text-center">
                <button type="submit" id="submitBtn" class="btn btn-primary" disabled>Preview</button>
            </div>
        </form>
    </div>

    <script>
        function validateForm() {
            let fields = document.querySelectorAll('.required-field');
            let submitButton = document.getElementById('submitBtn');
            let isValid = true;
            let agreeToTerms = document.querySelector('input[name="agree_to_terms"]:checked');

            fields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                }
            });

            if (!agreeToTerms || agreeToTerms.value !== "Yes") {
                isValid = false;
            }

            submitButton.disabled = !isValid;
        }

        document.querySelectorAll('.required-field').forEach(field => {
            field.addEventListener('input', validateForm);
            field.addEventListener('change', validateForm);
        });

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
